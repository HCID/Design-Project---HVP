<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 5.0//EN">
<html>
	<head>
		<script type="text/javascript" src="d3.v3/d3.v3.min.js"></script>

		<script type="text/javascript" src="Tuio.min.js"></script>

		<script>
			var client = new Tuio.Client({
			    host: "http://localhost:5000"
			}),

			onAddTuioCursor = function(addCursor) {
			  console.log(addCursor);
			},

			onUpdateTuioCursor = function(updateCursor) {
			  console.log(updateCursor);
			},

			onRemoveTuioCursor = function(removeCursor) {
			  console.log(removeCursor);
			},

			onAddTuioObject = function(addObject) {
			    console.log(addObject);
			},

			onUpdateTuioObject = function(updateObject) {
			    console.log(updateObject);
			},

			onRemoveTuioObject = function(removeObject) {
			    console.log(removeObject);
			},

			onRefresh = function(time) {
			  console.log(time);
			};

			client.on("addTuioCursor", onAddTuioCursor);
			client.on("updateTuioCursor", onUpdateTuioCursor);
			client.on("removeTuioCursor", onRemoveTuioCursor);
			client.on("addTuioObject", onAddTuioObject);
			client.on("updateTuioObject", onUpdateTuioObject);
			client.on("removeTuioObject", onRemoveTuioObject);
			client.on("refresh", onRefresh);
			client.connect();
		</script>

		<script>
		

		var circleSelection;
		var force = d3
						.layout
						.force()
						.gravity(0.1)
						.distance(300)
						.charge(function (d) { return d.a *10} )
						.size([1000,1000])
						.on("tick", function(){
			circleSelection.attr("transform", function (d) {				
				return "translate("+d.x+", " + d.y + ")";	
			});


		});

		function yay () {

			var data = [{"a": "20", "c":"#f4545f"},{"a": "30", "c":"#123456"},{"a": "40", "c":"#123400"},{"a": "50", "c":"#fff222"},{"a": "60", "c":"#f12343"}];


			force.nodes(data).start();

			circleSelection = d3.select("#our_id").selectAll("circle").data(
				data
			).enter().append("circle")
			.attr("r", function (d) {
				return d.a;})
			.attr("fill", function (d) {
				return d.c;})


			circleSelection
				.transition()
				.duration(3000)
				.style("stroke", "white")
				.style("stroke-width", 2)
				.transition()
				.duration(3000)
				.delay(3000)
					.style("stroke", "blue")
					.style("stroke-width", 5)
				.transition()
	            .duration( 750 )
	            .attr("cx", 100)
			      .attr("cy", -100)
			      .attr("r", 12)
			      .attr("transform", "translate(200,200)");
	                    


			circleSelection.exit().remove();

		}

		
		


		</script>
	</head>
	<body onload="yay()">
		<script>
			d3.select("body").transition().style("background-color", "black");
		</script>

		<svg id="our_id" width="1000" height="1000">
		
					
			
		</svg>
		<script>

			/*
			(function() {
			  var svg = d3.select("#chart-3").append("svg")
			      .attr("width", w)
			      .attr("height", h);

			  var circle = svg.selectAll(".little")
			      .data(data)
			    .enter().append("circle")
			      .attr("class", "little")
			      .attr("cx", x)
			      .attr("cy", y)
			      .attr("r", 12);

			  d3.select("#chart-3 button").on("click", function() {
			    circle.style("fill", "#aaa").attr("r", 12).attr("cy", y);
			    circle.transition().duration(500).delay(0).style("fill", "steelblue");
			    circle.transition().duration(500).delay(500).attr("cy", 90);
			    circle.transition().duration(500).delay(1000).attr("r", 30);
			  });
			})();
*/

		</script>

	</body>
</html>