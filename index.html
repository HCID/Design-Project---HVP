<html>
<head>
	    <script src="jquery-1.7.2.js"></script>
    <script src="lodash.js"></script>
    <script src="socket.io.js"></script>
    <script src="Tuio.min.js"></script>
	 <!-- <script src="coffee/script.js"></script> -->

<script>

var client = new Tuio.Client({
    host: "http://localhost:5000"
}),

onAddTuioCursor = function(addCursor) {
  console.log(addCursor.xPos*$(window).width());
  console.log(addCursor.yPos*$(window).height()); 

  console.log($(document.elementFromPoint(addCursor.xPos*$(window).width(), addCursor.yPos*$(window).height())));
  $(document.elementFromPoint(addCursor.xPos*$(window).width(), addCursor.yPos*$(window).height())).trigger("bap");    $("#circle").css("left", addCursor.xPos*$(window).width()-30 + "px");
  $("#circle").css("top", addCursor.yPos*$(window).height()-10 + "px"); 
  $("#circle").fadeIn();
  console.log(addCursor);
},

onUpdateTuioCursor = function(updateCursor) {
  //console.log(updateCursor);
  $("#circle").css("left", updateCursor.xPos*$(window).width()-30 + "px");
  $("#circle").css("top", updateCursor.yPos*$(window).height()-10 + "px"); 
},

onRemoveTuioCursor = function(removeCursor) {
  //console.log(removeCursor);
  $("#circle").fadeOut()
},

onAddTuioObject = function(addObject) {
    //console.log(addObject);
},

onUpdateTuioObject = function(updateObject) {
    //console.log(updateObject);
},

onRemoveTuioObject = function(removeObject) {
    //console.log(removeObject);
},

onRefresh = function(time) {
  //console.log(time);
};

client.on("addTuioCursor", onAddTuioCursor);
client.on("updateTuioCursor", onUpdateTuioCursor);
client.on("removeTuioCursor", onRemoveTuioCursor);
client.on("addTuioObject", onAddTuioObject);
client.on("updateTuioObject", onUpdateTuioObject);
client.on("removeTuioObject", onRemoveTuioObject);
client.on("refresh", onRefresh);
client.connect();

$(document).ready(function() {
  $("*").on("click", function(e){
    e.stopPropagation();
  })
  
  $("div#box").on("bap", function(){
    
    if($(this).hasClass("blue")) {
      
     $(this).attr("class", "red");
      $(this).css("background-color", "red");
    } else {
      
      $(this).attr("class", "blue");
        $(this).css("background-color", "blue");
    }
    
  })
})


</script>
</head>

<body>
  <div id="circle" style="border: 10px solid yellow; width: 40px; position: absolute; height: 40px; border-radius: 40px; display: none;"></div>
  <div id="box" style="width: 100px; height: 100px; background-color: red" class="red"></div>
  
</body>

</html>